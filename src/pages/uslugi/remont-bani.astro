---
import { Image } from 'astro:assets';
import BaseLayout from '../../layouts/BaseLayout.astro';
import masterImg from '../../assets/images/master.jpg';

const YM_ID = Number(import.meta.env.PUBLIC_YANDEX_METRICA_ID ?? 105996360);

const CONTACT = {
  phoneRaw: '79165835566',
  phoneDisplay: '+7 (916) 583-55-66',
  telegramUrl: 'https://t.me/79165835566',
  whatsappUrl: 'https://wa.me/79165835566',
} as const;

const service = {
  title: 'Ремонт бани и сауны',
  metaTitle: 'Ремонт бани и сауны под ключ в Москве — смета за 24 часа | PurePar',
  metaDescription: 'Профессиональный ремонт и реконструкция парных. Устраняем плесень, запах сырости, протечки. Смета за 24 часа. Гарантия 1 год. Работаем в Москве и МО.',
};

const problems = [
  { title: 'Потемнение вагонки', desc: 'Признак грибка или нарушения пароизоляции. Требует глубокой очистки или замены.', icon: 'alert' },
  { title: 'Запах сырости', desc: 'Ошибки в вентиляции или гниение утеплителя. Находим и устраняем причину навсегда.', icon: 'droplet' },
  { title: 'Протечки и конденсат', desc: 'Влага разрушает каркас бани. Восстанавливаем герметичность слоев.', icon: 'cloud-rain' },
  { title: 'Холодная парная', desc: 'Утечка тепла через щели или износ изоляции. Модернизируем систему утепления.', icon: 'thermometer' },
];

const master = {
  name: 'Владимир Морозов',
  title: 'Эксперт по ремонту бань',
  experience: '17',
  projects: '100+',
  quote: '«Ремонт бани требует большего мастерства, чем отделка новой. Нужно не просто закрыть дефекты, а найти причину их появления. Мы проводим тщательную дефектовку, чтобы ваша баня снова стала безопасной и долговечной.»'
};
---

<BaseLayout 
  title={service.metaTitle} 
  description={service.metaDescription}
>
  <section class="lp-hero">
    <div class="lp-hero-bg">
      <img src="/20251219_161737.jpg" alt="Ремонт бани" class="bg-img" loading="eager" />
      <div class="lp-hero-overlay"></div>
    </div>

    <div class="container lp-hero-grid">
      <div class="lp-hero-copy">
        <div class="lp-badge">
          <span class="pulse-dot"></span>
          Экспертная реставрация
        </div>
        <h1>Профессиональный <br/><span class="text-accent-gradient">ремонт бани</span> и сауны</h1>
        <p class="lp-subtitle">
          Вернем вашей бане первозданный вид и здоровый микроклимат. Глубокая диагностика, устранение дефектов и модернизация.
        </p>
        
        <div class="lp-hero-features">
          <div class="feat-item">
            <svg class="feat-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            <div class="feat-text"><strong>Осмотр</strong><span>0 ₽</span></div>
          </div>
          <div class="feat-item">
            <svg class="feat-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <div class="feat-text"><strong>Смета</strong><span>за 24 часа</span></div>
          </div>
          <div class="feat-item">
            <svg class="feat-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <div class="feat-text"><strong>Гарантия</strong><span>12 месяцев</span></div>
          </div>
        </div>

        <div class="lp-actions">
          <a class="btn btn-primary btn-lg btn-glow" href="#contact-form">Заказать диагностику</a>
          <a class="btn btn-outline-white btn-lg" href={`tel:+${CONTACT.phoneRaw}`}>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            {CONTACT.phoneDisplay}
          </a>
        </div>
      </div>

      <div class="lp-form-container">
        <div class="form-card glass-card">
          <div class="form-header">
            <h2>Описать проблему</h2>
            <p>Подготовим план решения за 24 часа</p>
          </div>
          <form id="lead-form">
            <div class="form-group">
              <input name="name" type="text" placeholder="Ваше имя" required />
            </div>
            <div class="form-group">
              <input name="phone" type="tel" class="phone-input-field" placeholder="+7 (___) ___-__-__" required />
            </div>
            <div class="form-group">
              <textarea name="message" rows="2" placeholder="Что случилось с баней? (потемнела, пахнет, холодно...)"></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-full btn-lg">Отправить</button>
            <p class="form-status" id="lead-status" aria-live="polite"></p>
            <div class="form-privacy">
              Нажимая кнопку, вы соглашаетесь с <a href="/privacy">политикой конфиденциальности</a>
            </div>
          </form>
        </div>

        <div class="floating-trust glass-card">
          <div class="trust-avatars">
            <img src="/20251219_161625.jpg" alt="" />
            <img src="/20251219_161652.jpg" alt="" />
            <img src="/20251008_122449.jpg" alt="" />
            <div class="avatar-plus">+100</div>
          </div>
          <div class="trust-text">
            <strong>Отремонтированных бань</strong>
            <span>по всей Москве и МО</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="lp-section bg-white" id="problems">
    <div class="container">
      <div class="section-header reveal">
        <span class="section-tag">Симптомы</span>
        <h2>Когда пора делать ремонт</h2>
      </div>
      <div class="grid-4">
        {problems.map((item, idx) => (
          <div class="problem-card-new reveal" style={`transition-delay: ${idx * 0.1}s;`}>
            <div class="problem-icon-box">
              {item.icon === 'alert' && <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>}
              {item.icon === 'droplet' && <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>}
              {item.icon === 'cloud-rain' && <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>}
              {item.icon === 'thermometer' && <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>}
            </div>
            <h3>{item.title}</h3>
            <p>{item.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="lp-section" id="master">
    <div class="container">
      <div class="master-trust-card reveal">
        <div class="master-image">
          <Image src={masterImg} alt="Владимир Морозов" width={500} quality="high" />
        </div>
        <div class="master-info">
          <span class="section-tag">О мастере</span>
          <h2>{master.name}</h2>
          <p class="master-role">{master.title}</p>
          <blockquote>
            {master.quote}
          </blockquote>
          <ul class="master-stats">
            <li><strong>{master.projects}</strong> <span>Проектов</span></li>
            <li><strong>100%</strong> <span>Результат</span></li>
            <li><strong>12 мес.</strong> <span>Гарантия</span></li>
          </ul>
          <div class="master-actions">
            <a href={CONTACT.whatsappUrl} class="btn btn-primary" target="_blank" rel="noopener">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"></path>
              </svg>
              Консультация в WhatsApp
            </a>
            <a href={CONTACT.telegramUrl} class="btn btn-outline" target="_blank" rel="noopener">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"></path>
              </svg>
              Написать в Telegram
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="lp-section bg-white" id="steps">
    <div class="container">
      <div class="section-header reveal">
        <span class="section-tag">Этапы</span>
        <h2>Как мы восстанавливаем бани</h2>
      </div>
      <div class="steps-modern">
        <div class="step-modern-item reveal">
          <div class="step-head">
            <span class="step-n">01</span>
            <h3>Диагностика</h3>
          </div>
          <p>Выявляем скрытые проблемы: проверяем состояние каркаса, печи и изоляции.</p>
        </div>
        <div class="step-modern-item reveal" style="transition-delay: 0.1s;">
          <div class="step-head">
            <span class="step-n">02</span>
            <h3>План работ</h3>
          </div>
          <p>Составляем смету с перечнем необходимых материалов и этапов ремонта.</p>
        </div>
        <div class="step-modern-item reveal" style="transition-delay: 0.2s;">
          <div class="step-head">
            <span class="step-n">03</span>
            <h3>Реставрация</h3>
          </div>
          <p>Аккуратно демонтируем старое и монтируем новое с гарантией герметичности.</p>
        </div>
        <div class="step-modern-item reveal" style="transition-delay: 0.3s;">
          <div class="step-head">
            <span class="step-n">04</span>
            <h3>Запуск</h3>
          </div>
          <p>Проверяем тягу, нагрев и вентиляцию. Сдаем объект в идеальном состоянии.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="lp-section bg-dark text-white" id="gallery">
    <div class="container">
      <div class="section-header reveal">
        <span class="section-tag">Портфолио</span>
        <h2 class="text-white">Наши работы</h2>
      </div>
      <div class="gallery-mosaic">
        <div class="gallery-main reveal">
          <img src="/20251219_161625.jpg" alt="Ремонт бани" loading="lazy" />
        </div>
        <div class="gallery-side reveal" style="transition-delay: 0.1s;">
          <img src="/20251219_161652.jpg" alt="Ремонт бани" loading="lazy" />
          <img src="/20251008_122449.jpg" alt="Ремонт бани" loading="lazy" />
        </div>
        <div class="gallery-bottom reveal" style="transition-delay: 0.2s;">
          <img src="/20250919_125436.jpg" alt="Ремонт бани" loading="lazy" />
          <img src="/20251219_161638.jpg" alt="Ремонт бани" loading="lazy" />
        </div>
      </div>
    </div>
  </section>

  <section class="lp-section" id="faq">
    <div class="container">
      <div class="section-header reveal">
        <span class="section-tag">Вопросы</span>
        <h2>Часто спрашивают</h2>
      </div>
      <div class="faq-accordion reveal">
        <details class="faq-details" open>
          <summary>Можно ли отремонтировать только часть отделки?</summary>
          <div class="faq-ans">Да, мы выполняем локальный ремонт: замену полов, полков или участков вагонки, если остальное состояние позволяет это сделать.</div>
        </details>
        <details class="faq-details">
          <summary>Как быстро вы приезжаете на осмотр?</summary>
          <div class="faq-ans">Обычно замерщик выезжает в течение 1-2 дней после обращения в удобное для вас время.</div>
        </details>
        <details class="faq-details">
          <summary>Даете ли вы гарантию на ремонт?</summary>
          <div class="faq-ans">Да, официальная гарантия 12 месяцев распространяется на все виды монтажных работ и установленные материалы.</div>
        </details>
      </div>
    </div>
  </section>

  <script is:inline define:vars={{ YM_ID }}>
    (function () {
      // Reveal animations (excluding hero to prevent layout shift)
      const observerOptions = {
        threshold: 0.1
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('active');
          }
        });
      }, observerOptions);

      document.querySelectorAll('.reveal:not(.lp-hero *)').forEach(el => observer.observe(el));

      function formatPhone(digits) {
        var formatted = "+7 (";
        if (digits.length > 0) formatted += digits.slice(0, 3);
        if (digits.length >= 3) formatted += ") " + digits.slice(3, 6);
        if (digits.length >= 6) formatted += "-" + digits.slice(6, 8);
        if (digits.length >= 8) formatted += "-" + digits.slice(8, 10);
        return formatted;
      }

      function extractDigits(value) {
        var digits = value.replace(/\D/g, "");
        if (digits.startsWith("7")) digits = digits.slice(1);
        if (digits.startsWith("8")) digits = digits.slice(1);
        return digits.slice(0, 10);
      }

      function setupPhoneMask(input) {
        input.addEventListener("focus", function () {
          if (!input.value) {
            input.value = "+7 (";
            setTimeout(function() { input.setSelectionRange(4, 4); }, 0);
          }
        });

        input.addEventListener("keydown", function (e) {
          if (e.key === "Backspace") {
            e.preventDefault();
            var digits = extractDigits(input.value);
            if (digits.length > 0) {
              var newDigits = digits.slice(0, -1);
              input.value = formatPhone(newDigits);
              var newPos = input.value.length;
              input.setSelectionRange(newPos, newPos);
            } else {
              input.value = "+7 (";
              input.setSelectionRange(4, 4);
            }
            return;
          }

          if (e.key === "Delete") {
            e.preventDefault();
            return;
          }

          if (e.key.length === 1 && /\d/.test(e.key)) {
            e.preventDefault();
            var digits = extractDigits(input.value);
            if (digits.length < 10) {
              var newDigits = digits + e.key;
              input.value = formatPhone(newDigits);
              var newPos = input.value.length;
              input.setSelectionRange(newPos, newPos);
            }
          }
        });

        input.addEventListener("input", function () {
          var digits = extractDigits(input.value);
          input.value = formatPhone(digits);
          var newPos = input.value.length;
          input.setSelectionRange(newPos, newPos);
        });

        input.addEventListener("paste", function (e) {
          var pastedText = e.clipboardData ? e.clipboardData.getData("text") : "";
          var pastedDigits = pastedText.replace(/\D/g, "");
          if (pastedDigits.length > 0) {
            e.preventDefault();
            var digits = pastedDigits;
            if (digits.startsWith("7") || digits.startsWith("8")) digits = digits.slice(1);
            var newDigits = digits.slice(0, 10);
            input.value = formatPhone(newDigits);
            var newPos = input.value.length;
            setTimeout(function() { input.setSelectionRange(newPos, newPos); }, 0);
          }
        });
      }

      document.querySelectorAll(".phone-input-field").forEach(function (input) {
        setupPhoneMask(input);
      });

      var form = document.getElementById("lead-form");
      var statusEl = document.getElementById("lead-status");
      if (!form) return;

      form.addEventListener("submit", async function (e) {
        e.preventDefault();
        if (!statusEl) return;

        var fd = new FormData(form);
        var name = (fd.get("name") || "").toString().trim();
        var phone = (fd.get("phone") || "").toString().trim();
        var message = (fd.get("message") || "").toString().trim();

        if (!name || phone.length < 18) {
          statusEl.textContent = "Заполните имя и телефон";
          statusEl.dataset.type = "error";
          return;
        }

        statusEl.textContent = "Отправка...";
        statusEl.dataset.type = "";

        try {
          var response = await fetch("/api/leads", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              name: name,
              phone: phone,
              message: message || null,
              referrer: document.referrer || null,
              landingPage: window.location.href,
            }),
          });

          if (!response.ok) throw new Error("bad_status");
          form.reset();
          statusEl.textContent = "Заявка отправлена! Мы свяжемся с вами в ближайшее время.";
          statusEl.dataset.type = "success";
          if (typeof window.ym === "function") {
            window.ym(YM_ID, "reachGoal", "lead_form");
          }
        } catch (err) {
          statusEl.textContent = "Ошибка отправки. Попробуйте позже.";
          statusEl.dataset.type = "error";
        }
      });
    })();
  </script>
</BaseLayout>

<style is:inline>
  /* Premium Palette & Utils */
  :root {
    --accent-grad: linear-gradient(135deg, #B8860B 0%, #8B6914 100%);
    --bg-light: #FDFBF7;
    --text-main: #1A1A1A;
  }
  
  .lp-section { padding: 120px 0; position: relative; overflow: hidden; }
  .bg-white { background: #fff; }
  .bg-dark { background: #111; }
  .text-white { color: #fff; }
  .text-accent-gradient { 
    background: var(--accent-grad);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Reveal Animation */
  .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
  .reveal.active { opacity: 1; transform: translateY(0); }

  /* Components */
  .section-header { text-align: center; margin-bottom: 80px; }
  .section-tag { 
    display: inline-block; 
    background: var(--accent-light); 
    color: var(--accent-dark); 
    padding: 8px 20px; 
    border-radius: 100px; 
    font-size: 12px; 
    font-weight: 800; 
    text-transform: uppercase; 
    letter-spacing: 2px; 
    margin-bottom: 24px; 
  }
  .section-header h2 { font-size: clamp(32px, 5vw, 48px); font-weight: 800; letter-spacing: -1px; }
  .section-header p { color: var(--text-muted); margin-top: 16px; font-size: 18px; }

  /* Hero Enhanced */
  .lp-hero { 
    padding: 100px 0 80px; 
    position: relative;
    overflow: hidden; 
    overflow: hidden; 
    color: #fff;
  }
  .lp-hero-bg { 
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; overflow: hidden;
  }
  .lp-hero-bg img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .lp-hero-overlay { 
    position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
    background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.4) 100%);
    z-index: 1;
  }
  .lp-hero-grid { position: relative; z-index: 2; display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 80px; align-items: center; }
  
  .lp-badge { 
    display: inline-flex; align-items: center; gap: 10px; 
    padding: 10px 20px; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2); border-radius: 100px; 
    font-size: 14px; font-weight: 700; margin-bottom: 32px; color: #fff;
  }
  .pulse-dot { width: 8px; height: 8px; background: #16a34a; border-radius: 50%; box-shadow: 0 0 0 rgba(22, 163, 74, 0.4); animation: pulse 2s infinite; }
  @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(22, 163, 74, 0); } 100% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); } }

  .lp-hero h1 { font-size: clamp(40px, 6vw, 64px); line-height: 1.05; margin-bottom: 32px; font-weight: 800; }
  .lp-subtitle { font-size: 20px; color: rgba(255,255,255,0.8); margin-bottom: 48px; max-width: 540px; line-height: 1.6; }
  
  .lp-hero-features { display: flex; gap: 40px; margin-bottom: 56px; }
  .feat-item { display: flex; align-items: center; gap: 12px; }
  .feat-icon { width: 24px; height: 24px; flex-shrink: 0; }
  .feat-text { display: flex; flex-direction: column; line-height: 1.2; }
  .feat-text strong { font-size: 16px; color: #fff; }
  .feat-text span { font-size: 13px; color: rgba(255,255,255,0.6); }

  .lp-actions { display: flex; gap: 20px; }
  .btn-lg { padding: 20px 40px; font-size: 17px; font-weight: 700; border-radius: 14px; }
  .btn-glow:hover { box-shadow: 0 10px 30px rgba(184, 134, 11, 0.3); transform: translateY(-2px); }
  .btn-outline-white { border: 2px solid rgba(255,255,255,0.3); color: #fff; backdrop-filter: blur(5px); }
  .btn-outline-white:hover { background: #fff; color: #000; border-color: #fff; }

  /* Form Glassmorphism */
  .lp-form-container { position: relative; }
  .glass-card { 
    background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 32px;
    padding: 48px; box-shadow: 0 30px 60px rgba(0,0,0,0.2);
    color: var(--text-main);
  }
  .form-header h2 { font-size: 28px; margin-bottom: 12px; }
  .form-group { margin-bottom: 16px; }
  .form-group input, .form-group textarea { 
    width: 100%; background: #f8f8f8; border: 1px solid var(--border); border-radius: 16px; 
    padding: 18px 24px; font-size: 16px; transition: 0.3s; box-sizing: border-box;
  }
  .form-group input:focus { border-color: var(--accent); box-shadow: 0 0 0 4px var(--accent-light); background: #fff; }

  /* Floating Trust */
  .floating-trust { 
    position: absolute; bottom: -40px; left: -40px; 
    display: flex; align-items: center; gap: 20px; padding: 20px 30px;
    min-width: 280px; z-index: 3;
  }
  .trust-avatars { display: flex; align-items: center; }
  .trust-avatars img, .avatar-plus { 
    width: 44px; height: 44px; border-radius: 50%; border: 3px solid #fff; 
    object-fit: cover; margin-left: -15px; 
  }
  .trust-avatars img:first-child { margin-left: 0; }
  .avatar-plus { 
    background: var(--accent); color: #fff; font-size: 12px; font-weight: 800;
    display: flex; align-items: center; justify-content: center;
  }
  .trust-text { display: flex; flex-direction: column; line-height: 1.2; }
  .trust-text strong { font-size: 15px; }
  .trust-text span { font-size: 12px; color: var(--text-muted); }

  /* Problem Cards */
  .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; }
  .problem-card-new { 
    background: #fff; padding: 40px; border-radius: 24px; 
    border: 1px solid var(--border); transition: all 0.3s; 
  }
  .problem-card-new:hover { transform: translateY(-5px); border-color: #dc2626; box-shadow: 0 10px 30px rgba(220, 38, 38, 0.05); }
  .problem-icon-box { 
    width: 56px; height: 56px; background: #fef2f2; color: #dc2626; 
    border-radius: 16px; display: flex; align-items: center; justify-content: center; 
    margin-bottom: 24px;
  }
  .problem-icon-box svg { width: 24px; height: 24px; }
  .problem-card-new h3 { font-size: 20px; margin-bottom: 16px; }
  .problem-card-new p { font-size: 15px; color: var(--text-muted); line-height: 1.6; margin: 0; }

  /* Master Trust Card */
  .master-trust-card { 
    display: grid; grid-template-columns: 0.9fr 1.1fr; gap: 60px; align-items: center;
    background: #fff; border-radius: 40px; padding: 60px; border: 1px solid var(--border);
    box-shadow: 0 40px 80px rgba(0,0,0,0.05);
  }
  .master-image { position: relative; border-radius: 30px; overflow: hidden; }
  .master-image img { width: 100%; height: auto; display: block; }
  .experience-badge { 
    position: absolute; bottom: 30px; right: 30px; 
    background: var(--text); color: #fff; padding: 20px; 
    border-radius: 20px; text-align: center; min-width: 120px;
  }
  .experience-badge strong { font-size: 32px; display: block; line-height: 1; }
  .experience-badge span { font-size: 13px; text-transform: uppercase; letter-spacing: 1px; }
  
  .master-info h2 { font-size: 40px; margin-bottom: 8px; }
  .master-role { color: var(--accent); font-weight: 700; font-size: 18px; margin-bottom: 32px; }
  .master-info blockquote { font-size: 19px; font-style: italic; color: var(--text-muted); border-left: 4px solid var(--accent); padding-left: 24px; margin: 32px 0; line-height: 1.6; }
  .master-stats { display: flex; gap: 40px; margin-bottom: 40px; }
  .master-stats strong { font-size: 28px; display: block; color: var(--text); }
  .master-stats span { font-size: 14px; color: var(--text-muted); }

  /* Modern Steps */
  .steps-modern { display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px; }
  .step-modern-item { position: relative; }
  .step-head { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
  .step-n { font-size: 40px; font-weight: 900; color: var(--accent-light); opacity: 0.8; font-family: serif; }
  .step-modern-item h3 { font-size: 22px; }
  .step-modern-item p { color: var(--text-muted); line-height: 1.6; }

  /* Mosaic Gallery */
  .gallery-mosaic { display: grid; grid-template-columns: 1.5fr 1fr; gap: 24px; margin-bottom: 40px; max-width: 100%; }
  .gallery-mosaic img { width: 100%; height: 100%; object-fit: cover; border-radius: 24px; display: block; }
  .gallery-main { height: 500px; overflow: hidden; }
  .gallery-side { display: flex; flex-direction: column; gap: 24px; height: 500px; }
  .gallery-side img { height: calc(50% - 12px); }
  .gallery-bottom { grid-column: span 2; display: grid; grid-template-columns: 1fr 1fr; gap: 24px; height: 300px; }
  .gallery-cta { text-align: center; margin-top: 50px; }

  /* FAQ Accordion */
  .faq-accordion { max-width: 840px; margin: 0 auto; }
  .faq-details { background: #fff; border: 1px solid var(--border); border-radius: 20px; margin-bottom: 16px; transition: 0.3s; }
  .faq-details summary { padding: 24px 32px; cursor: pointer; font-weight: 700; font-size: 18px; list-style: none; display: flex; justify-content: space-between; align-items: center; }
  .faq-details summary::after { content: '↓'; font-size: 20px; color: var(--accent); transition: 0.3s; }
  .faq-details[open] { border-color: var(--accent); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
  .faq-details[open] summary::after { transform: rotate(180deg); }
  .faq-ans { padding: 0 32px 32px; color: var(--text-muted); line-height: 1.7; }

  @media (max-width: 1024px) {
    .lp-hero { padding: 80px 0 60px; }
    .lp-hero-grid { grid-template-columns: 1fr; text-align: center; gap: 60px; }
    .lp-hero-copy { align-items: center; display: flex; flex-direction: column; }
    .lp-hero-copy h1 { font-size: 36px; }
    .lp-actions { width: 100%; flex-direction: column; }
    .floating-trust { position: static; margin-top: 30px; justify-content: center; }
    .master-trust-card { grid-template-columns: 1fr; padding: 40px; }
    .grid-4 { grid-template-columns: repeat(2, 1fr); }
    .steps-modern { grid-template-columns: repeat(2, 1fr); }
    .gallery-mosaic { grid-template-columns: 1fr; }
    .gallery-side, .gallery-bottom { height: auto; grid-template-columns: 1fr; }
    .gallery-main { height: 350px; }
  }
  @media (max-width: 640px) {
    .lp-hero { padding: 40px 0 30px; }
    .lp-hero-copy h1 { font-size: 28px; line-height: 1.2; }
    .lp-subtitle { font-size: 15px; }
    .lp-hero-features { flex-direction: column; gap: 12px; align-items: flex-start; width: 100%; }
    .feat-item { width: 100%; }
    .lp-actions { gap: 12px; }
    .lp-actions .btn { width: 100%; justify-content: center; }
    .grid-4 { grid-template-columns: 1fr; }
    .steps-modern { grid-template-columns: 1fr; }
    .master-stats { flex-wrap: wrap; gap: 24px; }
    .glass-card { padding: 24px 16px; border-radius: 20px; }
    .form-header h2 { font-size: 22px; }
    .floating-trust { left: 0; right: 0; bottom: -30px; min-width: auto; padding: 16px 20px; }
    .lp-section { padding: 60px 0; }
    .section-header h2 { font-size: 28px; }
    .btn-lg { padding: 14px 24px; font-size: 14px; white-space: nowrap; }
    .gallery-main { height: 250px; }
    .gallery-side img, .gallery-bottom img { height: 200px; }
  }
</style>
